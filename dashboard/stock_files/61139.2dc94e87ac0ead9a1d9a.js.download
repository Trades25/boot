(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[61139],{57761:(e,t,s)=>{"use strict";s.d(t,{OptionsDialogController:()=>o});var i=s(999138);let n;class o extends i.DialogRenderer{constructor(){super(...arguments),this._dialog=null,this._subscribe=e=>{this._setVisibility(e)}}show(e){this._load(e).then((e=>e.show()))}hide(){this._dialog?.hide()}static getInstance(){return n||(n=new o),n}_load(e){return Promise.all([s.e(56316),s.e(13229),s.e(75816),s.e(93703),s.e(46445),s.e(44524),s.e(62093),s.e(44178),s.e(21356),s.e(62564),s.e(58985),s.e(59258),s.e(82421),s.e(67158),s.e(16190),s.e(3782),s.e(77280),s.e(49162),s.e(85758),s.e(28101),s.e(84984),s.e(98819),s.e(82321),s.e(31057),s.e(52318),s.e(62526),s.e(52181),s.e(64198)]).then(s.bind(s,104351)).then((t=>(this._dialog?.hide(),this._dialog?.visible().unsubscribe(this._subscribe),this._dialog=new t.OptionsDialogRenderer(e),this._dialog.visible().subscribe(this._subscribe),this._dialog)))}}},250378:(e,t,s)=>{"use strict";s.d(t,{BadRequestErrorResponse:()=>n});var i=s(867023);class n extends i.ErrorResponse{constructor(e){super(e),this.name="BadRequestError",e.error?this.message=e.error:this.message="unknown error"}}},867023:(e,t,s)=>{"use strict";s.d(t,{ErrorResponse:()=>i});class i{constructor(e){this._status=e.status,this._statusText=e.statusText||""}getInfo(){return{name:this.name,status:this._status,statusText:this._statusText,message:this.message}}}},685503:(e,t,s)=>{"use strict";s.d(t,{HttpErrorResponse:()=>n});var i=s(867023);class n extends i.ErrorResponse{constructor(e){super(e),this.name="HttpErrorResponse",this._status>=200&&this._status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`}}},159954:(e,t,s)=>{"use strict";s.d(t,{SymbolDoesNotExistErrorResponse:()=>n});var i=s(867023);class n extends i.ErrorResponse{constructor(e){super(e),this.name="SymbolDoesNotExistError",this.message=e.error||"symbol does not exist"}}},438874:(e,t,s)=>{"use strict";function i(){return window.SCREENER_HOST||"https://scanner.tradingview.com"}function n(e,t){const s=i();return t?`${s}/${t}/`:1===e.length?`${s}/${e[0]}/`:`${s}/global/`}function o(e,t,s,n,o){const r=i(),a={symbol:e,fields:t};n&&(a.no_404="true"),o&&(a.price_conversion="disabled"),s&&(a["label-product"]=s);const l=new URL(`${r}/symbol`);return Object.keys(a).forEach((e=>{l.searchParams.append(e,a[e])})),l.toString()}s.d(t,{getBackendUrl:()=>n,getSymbolDataUrl:()=>o})},163482:(e,t,s)=>{"use strict";s.d(t,{TECHNICALS_QS_FIELDS:()=>i,TECHNICALS_SCREENER_COLUMNS:()=>l,requiredMAColumns:()=>r,requiredOscColumns:()=>o,requiredPivotsColumns:()=>a,requiredRecommendColumns:()=>n})
;const i=["type","listed_exchange","pricescale","typespecs","pro_name","short_name"],n=["Recommend.Other","Recommend.All","Recommend.MA"],o=["RSI","Stoch.K","CCI20","ADX","AO","Mom","MACD.macd","Stoch.RSI.K","W.R","BBPower","UO"],r=["EMA10","SMA10","EMA20","SMA20","EMA30","SMA30","EMA50","SMA50","EMA100","SMA100","EMA200","SMA200","Ichimoku.BLine","VWMA","HullMA9"],a=["Pivot.M.Classic.R3","Pivot.M.Classic.R2","Pivot.M.Classic.R1","Pivot.M.Classic.Middle","Pivot.M.Classic.S1","Pivot.M.Classic.S2","Pivot.M.Classic.S3","Pivot.M.Fibonacci.R3","Pivot.M.Fibonacci.R2","Pivot.M.Fibonacci.R1","Pivot.M.Fibonacci.Middle","Pivot.M.Fibonacci.S1","Pivot.M.Fibonacci.S2","Pivot.M.Fibonacci.S3","Pivot.M.Camarilla.R3","Pivot.M.Camarilla.R2","Pivot.M.Camarilla.R1","Pivot.M.Camarilla.Middle","Pivot.M.Camarilla.S1","Pivot.M.Camarilla.S2","Pivot.M.Camarilla.S3","Pivot.M.Woodie.R3","Pivot.M.Woodie.R2","Pivot.M.Woodie.R1","Pivot.M.Woodie.Middle","Pivot.M.Woodie.S1","Pivot.M.Woodie.S2","Pivot.M.Woodie.S3","Pivot.M.Demark.R1","Pivot.M.Demark.Middle","Pivot.M.Demark.S1"],l=[...n,...o,...r,...a]},719885:(e,t,s)=>{"use strict";s.d(t,{TechnicalsDialogController:()=>_});var i=s(583912),n=s(999138),o=s(729030),r=s(254526),a=s(163482);let l;class _ extends n.DialogRenderer{constructor(){super(...arguments),this._dialog=null,this._subscribe=e=>{this._setVisibility(e)}}async show(e){const t=e?.symbol?e.symbol:i.linking.proSymbol.value();if(e?.snapshot){const{snapshot:s}=e,i=await this._loadModule();this._getDialog(i,{...e,symbol:t,...s,exchange:s.listed_exchange}).show()}else{const i=async()=>{const{snapshoter:e}=await s.e(51030).then(s.bind(s,795394));return e().getSnapshot(t,new Set(a.TECHNICALS_QS_FIELDS))},[n,o]=await Promise.all([this._loadModule(),i()]);if("error"===o.status)return void this._getDialog(n,{...e,symbol:t}).show();this._getDialog(n,{...e,symbol:t,...o.values,exchange:o.values.listed_exchange}).show()}}async canBeShown(e){const t=e||i.linking.proSymbol.value();if(!t)return!1;const n=new Set([...a.TECHNICALS_QS_FIELDS,"description"]),l=await(async()=>{const{snapshoter:e}=await s.e(51030).then(s.bind(s,795394));return e().getSnapshot(t,n)})();if("error"===l.status)return!1;const{values:{type:_,listed_exchange:h,description:c}}=l;if(!r.SYMBOL_TYPE_BLACK_LIST.has(_))try{const e=await(0,o.getSymbolData)(null,t,["Recommend.All"]);return Boolean(e&&0!==Object.keys(e).length&&c&&h&&_)}catch(e){return!1}return!1}hide(){this._dialog?.hide()}static getInstance(){return l||(l=new _),l}_getDialog(e,t){return this._dialog?.hide(),this._dialog?.visible().unsubscribe(this._subscribe),this._dialog=new e.TechnicalsDialogRenderer(t),this._dialog.visible().subscribe(this._subscribe),this._dialog}_loadModule(){
return Promise.all([s.e(7056),s.e(75816),s.e(93703),s.e(44524),s.e(62093),s.e(44178),s.e(21356),s.e(53953),s.e(49481),s.e(58985),s.e(59258),s.e(82421),s.e(67158),s.e(65857),s.e(16190),s.e(3782),s.e(77280),s.e(49162),s.e(85758),s.e(28101),s.e(6633),s.e(89259),s.e(31234),s.e(84984),s.e(96589),s.e(73131),s.e(96312),s.e(47479),s.e(51661),s.e(82321),s.e(52181),s.e(49081),s.e(76963),s.e(71138)]).then(s.bind(s,168218))}}},196726:(e,t,s)=>{"use strict";s.d(t,{preventDefault:()=>n,preventScrollByWheelClick:()=>r,wrapHandlerWithPreventEvent:()=>o});var i=s(638456);function n(e){e.cancelable&&e.preventDefault()}function o(e){return t=>{n(t),e(t)}}function r(e){i.isChrome&&e.addEventListener("mousedown",(e=>{if(1===e.button)return e.preventDefault(),!1}))}},589026:(e,t,s)=>{"use strict";s.d(t,{BondYieldCurveDialogController:()=>o});var i=s(999138);let n;class o extends i.DialogRenderer{constructor(){super(...arguments),this._dialog=null,this._subscribe=e=>{this._setVisibility(e)}}show(e){this._load(e).then((e=>e.show()))}hide(){this._dialog?.hide()}static getInstance(){return n||(n=new o),n}_load(e){return Promise.all([s.e(56316),s.e(43006),s.e(75816),s.e(93703),s.e(46445),s.e(44524),s.e(62093),s.e(44178),s.e(21356),s.e(62564),s.e(58985),s.e(59258),s.e(82421),s.e(67158),s.e(29800),s.e(16190),s.e(3782),s.e(77280),s.e(49162),s.e(85758),s.e(28101),s.e(84984),s.e(43848),s.e(82256),s.e(82321),s.e(62526),s.e(52181),s.e(15678)]).then(s.bind(s,229519)).then((t=>(this._dialog?.hide(),this._dialog?.visible().unsubscribe(this._subscribe),this._dialog=new t.BondYieldCurveDialogRenderer(e),this._dialog.visible().subscribe(this._subscribe),this._dialog)))}}},273058:(e,t,s)=>{"use strict";s.d(t,{EtfAnalysisDialogController:()=>o});var i=s(999138);let n;class o extends i.DialogRenderer{constructor(){super(...arguments),this._dialog=null,this._subscribe=e=>{this._setVisibility(e)}}show(e){this._load(e).then((e=>e.show()))}hide(){this._dialog?.hide()}static getInstance(){return n||(n=new o),n}_load(e){return Promise.all([s.e(28435),s.e(29898),s.e(75816),s.e(93703),s.e(46445),s.e(44524),s.e(62093),s.e(44178),s.e(21356),s.e(62564),s.e(58985),s.e(59258),s.e(22164),s.e(82421),s.e(67158),s.e(65857),s.e(36010),s.e(16190),s.e(3782),s.e(73399),s.e(77280),s.e(49162),s.e(98734),s.e(85758),s.e(28101),s.e(68827),s.e(17762),s.e(13427),s.e(56657),s.e(84984),s.e(70125),s.e(36770),s.e(87445),s.e(66764),s.e(71938),s.e(86314),s.e(92069),s.e(79874),s.e(39705),s.e(57415),s.e(78915),s.e(54862),s.e(27287),s.e(82321),s.e(12831),s.e(68122),s.e(52181),s.e(29508),s.e(8458),s.e(97807),s.e(5936),s.e(68811),s.e(14348),s.e(58534)]).then(s.bind(s,526551)).then((t=>(this._dialog?.hide(),this._dialog?.visible().unsubscribe(this._subscribe),this._dialog=new t.EtfAnalysisDialogRenderer(e),this._dialog.visible().subscribe(this._subscribe),this._dialog)))}}},232650:(e,t,s)=>{"use strict";s.d(t,{openFinancialsWebview:()=>c});var i=s(92651),n=s(675128),o=s(476047),r=s(176637)
;const a=new Set(["number_of_employees","web_site_url","founded","ceo","market_cap_basic","dividends_yield","price_earnings_ttm","earnings_per_share_basic_ttm","currency_code","fundamental_currency_code","float_shares_outstanding","total_shares_outstanding","total_revenue_fy_h","total_revenue_fq_h","total_revenue_fh_h","net_income_fy_h","net_income_fq_h","net_income_fh_h","total_assets_fy_h","total_assets_fq_h","total_assets_fh_h","total_liabilities_fy_h","total_liabilities_fq_h","total_liabilities_fh_h","cash_f_operating_activities_fy_h","cash_f_operating_activities_fq_h","cash_f_operating_activities_fh_h","cash_f_investing_activities_fy_h","cash_f_investing_activities_fq_h","cash_f_investing_activities_fh_h","cash_f_financing_activities_fy_h","cash_f_financing_activities_fq_h","cash_f_financing_activities_fh_h","fiscal_period_fy_h","fiscal_period_fq_h","fiscal_period_fh_h","interest_income_fy_h","interest_income_fq_h","interest_income_fh_h","non_interest_income_fy_h","non_interest_income_fq_h","non_interest_income_fh_h","earnings_release_date_fq_h","earnings_release_date_fy_h","earnings_release_date_fh_h","earnings_release_next_date_fq","earnings_release_next_date_fy","earnings_release_next_date_fh","earnings_release_next_time","earnings_release_next_date","is_next_earnings_release_date_estimated","earnings_per_share_forecast_next_fq","earnings_per_share_forecast_next_fy","earnings_per_share_forecast_next_fh","earnings_per_share_forecast_fq_h","earnings_per_share_forecast_fy_h","earnings_per_share_forecast_fh_h","earnings_per_share_fq_h","earnings_per_share_fy_h","earnings_per_share_fh_h","earnings_fiscal_period_fq_h","earnings_fiscal_period_fy_h","earnings_fiscal_period_fh_h","next_earnings_fiscal_period_fq","next_earnings_fiscal_period_fy","next_earnings_fiscal_period_fh","revenue_fq_h","revenue_fy_h","revenue_fh_h","revenue_forecast_fq_h","revenue_forecast_fy_h","revenue_forecast_fh_h","revenue_forecast_next_fq","revenue_forecast_next_fy","revenue_forecast_next_fh","fundamental_currency_code","dividend_payout_ratio_ttm","dividends_yield_current","dividend_ex_date_upcoming","dividend_amount_upcoming","dividend_amount_recent","dividend_ex_date_recent","dividend_amount_h","total_revenue_fy","gross_profit_fy","ebitda_fy","ebit_fy","net_income_fy","fiscal_period_fy","fiscal_period_fy_h","fiscal_period_fq_h","fiscal_period_fh_h","total_debt_fy_h","total_debt_fq_h","total_debt_fh_h","free_cash_flow_fy_h","free_cash_flow_fq_h","free_cash_flow_fh_h","cash_n_equivalents_fy_h","cash_n_equivalents_fq_h","cash_n_equivalents_fh_h","loans_net_fy_h","loans_net_fq_h","loans_net_fh_h","total_deposits_fy_h","total_deposits_fq_h","total_deposits_fh_h","loan_loss_allowances_fy_h","loan_loss_allowances_fq_h","loan_loss_allowances_fh_h","insurance_reserves_fy_h","insurance_reserves_fq_h","insurance_reserves_fh_h","policy_claims_fy_h","policy_claims_fq_h","policy_claims_fh_h","premiums_earned_fy_h","premiums_earned_fq_h","premiums_earned_fh_h","common_equity_tier1_ratio_fy_h","common_equity_tier1_ratio_fq_h","common_equity_tier1_ratio_fh_h","tier1_capital_ratio_fy_h","tier1_capital_ratio_fq_h","tier1_capital_ratio_fh_h","total_capital_ratio_fy_h","total_capital_ratio_fq_h","total_capital_ratio_fh_h","fiscal_period_fy_h","fiscal_period_fq_h","fiscal_period_fh_h","reserve_to_total_capital_fy_h","reserve_to_total_capital_fq_h","reserve_to_total_capital_fh_h","unearned_premium_to_total_capital_fy_h","unearned_premium_to_total_capital_fq_h","unearned_premium_to_total_capital_fh_h","fundamental_currency_code","total_current_assets_fy","total_current_assets_fq","total_current_assets_fh","total_current_liabilities_fy","total_current_liabilities_fq","total_current_liabilities_fh","total_non_current_assets_fy","total_non_current_assets_fq","total_non_current_assets_fh","total_non_current_liabilities_fy","total_non_current_liabilities_fq","total_non_current_liabilities_fh","fiscal_period_fy","fiscal_period_fq","fiscal_period_fh","fundamental_currency_code","price_earnings_fq_h","price_earnings_fy_h","price_earnings_fh_h","price_sales_fq_h","price_sales_fy_h","price_sales_fh_h","fiscal_period_fy_h","fiscal_period_fq_h","fiscal_period_fh_h","market_cap_basic","diluted_net_income_ttm","total_revenue_ttm","price_earnings_current","price_sales_current","fundamental_currency_code","revenue_seg_by_business_h","revenue_seg_by_region_h","fiscal_period_fy","interest_income_fy","interest_income_fq","interest_income_fh","non_interest_income_fy","non_interest_income_fq","non_interest_income_fh","interest_expense_fy","interest_expense_fq","interest_expense_fh","loan_loss_provision_fy","loan_loss_provision_fq","loan_loss_provision_fh","non_interest_expense_fy","non_interest_expense_fq","non_interest_expense_fh","non_oper_income_fy","non_oper_income_fq","non_oper_income_fh","unusual_expense_inc_fy","unusual_expense_inc_fq","unusual_expense_inc_fh","pretax_income_fy","pretax_income_fq","pretax_income_fh","total_revenue_fy","total_revenue_fq","total_revenue_fh","gross_profit_fy","gross_profit_fq","gross_profit_fh","net_income_fy","net_income_fq","net_income_fh","cost_of_goods_fy","cost_of_goods_fq","cost_of_goods_fh","operating_expenses_fy","operating_expenses_fq","operating_expenses_fh","oper_income_fy","oper_income_fq","oper_income_fh","total_non_oper_income_fy","total_non_oper_income_fq","total_non_oper_income_fh","income_tax_fy","income_tax_fq","income_tax_fh","after_tax_other_income_fy","after_tax_other_income_fq","after_tax_other_income_fh","fiscal_period_fy","fiscal_period_fq","fiscal_period_fh","equity_in_earnings_fy","equity_in_earnings_fq","equity_in_earnings_fh","minority_interest_exp_fy","minority_interest_exp_fq","minority_interest_exp_fh","discontinued_operations_fy","discontinued_operations_fq","discontinued_operations_fh","fundamental_currency_code","fund_view_mode"]),l=(0,
n.lazyValue)((()=>new o.QuoteSessionSnapshoter({name:"financials-webview-quotes",fields:[...a]})));let _;class h extends i.WebviewControllerBase{open(e){const t=this._createOpenRequest(i.WebviewPageName.Financials,e);l().getSnapshot(t.symbol(),a);t.execute().ChartQuoteSnapshotProvider={getQuoteSnapshot(){const e=r.QUOTE_FIELDS_CACHE.get(t.symbol());return e?.values??{}}}}static getInstance(){return _||(_=new h),_}}function c(e){h.getInstance().open(e)}},110723:(e,t,s)=>{"use strict";s.d(t,{corporateBondsDialogController:()=>r});var i=s(999138),n=s(481251);class o extends i.DialogRenderer{constructor(){super(...arguments),this._dialog=null,this._subscribe=e=>{this._setVisibility(e)}}show(e){this._load(e).then((e=>e.show()))}hide(){this._dialog?.hide()}_load(e){return Promise.all([s.e(28435),s.e(30598),s.e(75816),s.e(93703),s.e(46445),s.e(44524),s.e(62093),s.e(44178),s.e(21356),s.e(53953),s.e(49481),s.e(62564),s.e(58985),s.e(59258),s.e(22164),s.e(82421),s.e(67158),s.e(65857),s.e(36010),s.e(72197),s.e(16190),s.e(3782),s.e(73399),s.e(77280),s.e(49162),s.e(45621),s.e(98734),s.e(24125),s.e(85758),s.e(28101),s.e(6633),s.e(89259),s.e(80774),s.e(26771),s.e(68827),s.e(17762),s.e(13427),s.e(84984),s.e(70125),s.e(36770),s.e(87445),s.e(66764),s.e(71938),s.e(86314),s.e(92069),s.e(39705),s.e(51014),s.e(57415),s.e(98668),s.e(78915),s.e(53408),s.e(3580),s.e(82321),s.e(12831),s.e(68122),s.e(73026),s.e(43052),s.e(52181),s.e(29508),s.e(8458),s.e(97807),s.e(5936),s.e(9583),s.e(14348),s.e(18220)]).then(s.bind(s,752868)).then((t=>(this._dialog?.hide(),this._dialog?.visible().unsubscribe(this._subscribe),this._dialog=new t.CorporateBondsDialogRenderer(e),this._dialog.visible().subscribe(this._subscribe),this._dialog)))}}const r=(0,n.default)((()=>new o))},713931:(e,t,s)=>{"use strict";s.d(t,{hideDetailsDialogs:()=>c});var i=s(57761),n=s(719885),o=s(988534),r=s(316478),a=s(273058),l=s(589026),_=s(110723),h=s(858554);function c(e){"forecast"!==e&&function(){const e=r.ForecastDialogController.getInstance();e.visible()&&e.hide()}(),"technicals"!==e&&function(){const e=n.TechnicalsDialogController.getInstance();e.visible()&&e.hide()}(),"financials"!==e&&function(){const e=o.FinancialsDialogController.getInstance();e.visible()&&e.hide()}(),"corporate-bonds"!==e&&function(){const e=(0,_.corporateBondsDialogController)();e.visible()&&e.hide()}(),"options"!==e&&function(){const e=i.OptionsDialogController.getInstance();e.visible()&&e.hide()}(),"etf-analysis"!==e&&function(){const e=a.EtfAnalysisDialogController.getInstance();e.visible()&&e.hide()}(),"bond-yield-curve"!==e&&function(){const e=l.BondYieldCurveDialogController.getInstance();e.visible()&&e.hide()}(),"seasonals"!==e&&function(){const e=h.SeasonalsDialogController.getInstance();e.visible()&&e.hide()}()}},988534:(e,t,s)=>{"use strict";s.d(t,{FinancialsDialogController:()=>o});var i=s(999138);let n;class o extends i.DialogRenderer{constructor(){super(...arguments),this._dialog=null,this._subscribe=e=>{this._setVisibility(e)}}show(e){this._load(e).then((e=>e.show()))}hide(){
this._dialog?.hide()}static getInstance(){return n||(n=new o),n}_load(e){return Promise.all([s.e(28435),s.e(15042),s.e(75816),s.e(93703),s.e(46445),s.e(44524),s.e(62093),s.e(44178),s.e(21356),s.e(53953),s.e(49481),s.e(62564),s.e(58985),s.e(59258),s.e(22164),s.e(82421),s.e(46489),s.e(67158),s.e(53799),s.e(65857),s.e(36010),s.e(25480),s.e(72197),s.e(49742),s.e(16190),s.e(62234),s.e(3782),s.e(77280),s.e(49162),s.e(22106),s.e(30422),s.e(45621),s.e(98734),s.e(24125),s.e(93523),s.e(85758),s.e(28101),s.e(6633),s.e(89259),s.e(44066),s.e(80774),s.e(8222),s.e(26771),s.e(68827),s.e(17762),s.e(13427),s.e(84984),s.e(39967),s.e(70125),s.e(36770),s.e(87445),s.e(66764),s.e(71938),s.e(86314),s.e(92069),s.e(39705),s.e(29145),s.e(62584),s.e(24056),s.e(98668),s.e(53408),s.e(54862),s.e(97022),s.e(82321),s.e(12831),s.e(68122),s.e(73026),s.e(43052),s.e(52181),s.e(29508),s.e(8458),s.e(5936),s.e(36198),s.e(9583),s.e(24878)]).then(s.bind(s,681057)).then((t=>(this._dialog?.hide(),this._dialog?.visible().unsubscribe(this._subscribe),this._dialog=new t.FinancialsDialogRenderer(e),this._dialog.visible().subscribe(this._subscribe),this._dialog)))}}},700134:(e,t,s)=>{"use strict";s.d(t,{showFinancialsDialog:()=>o});var i=s(988534),n=s(713931);function o(e){i.FinancialsDialogController.getInstance().show({...e,onOpen:()=>{(0,n.hideDetailsDialogs)("financials")}})}},316478:(e,t,s)=>{"use strict";s.d(t,{ForecastDialogController:()=>r});var i=s(999138),n=s(583912);let o;class r extends i.DialogRenderer{constructor(){super(...arguments),this._dialog=null,this._subscribe=e=>{this._setVisibility(e)}}show(e){this._load(e).then((e=>e.show()))}hide(){this._dialog?.hide()}async canBeShown(e){const t=e||n.linking.proSymbol.value(),i=new Set(["recommendation_mark","pro_name"]),o=await(async()=>{const{snapshoter:e}=await s.e(62495).then(s.bind(s,960669));return e().getSnapshot(t,i)})();return!("error"===o.status||!o.values.recommendation_mark)}static getInstance(){return o||(o=new r),o}_load(e){return Promise.all([s.e(28435),s.e(40078),s.e(75816),s.e(93703),s.e(44524),s.e(62093),s.e(44178),s.e(21356),s.e(53953),s.e(49481),s.e(62564),s.e(58985),s.e(59258),s.e(22164),s.e(82421),s.e(67158),s.e(65857),s.e(40142),s.e(16190),s.e(3782),s.e(77280),s.e(49162),s.e(92115),s.e(98734),s.e(85758),s.e(28101),s.e(6633),s.e(89259),s.e(31234),s.e(17762),s.e(13427),s.e(84984),s.e(36770),s.e(96589),s.e(73131),s.e(86314),s.e(92069),s.e(39705),s.e(55773),s.e(86873),s.e(98668),s.e(66285),s.e(82321),s.e(12831),s.e(52181),s.e(29508),s.e(8458),s.e(49081),s.e(76963),s.e(85080)]).then(s.bind(s,113564)).then((t=>(this._dialog?.hide(),this._dialog?.visible().unsubscribe(this._subscribe),this._dialog=new t.ForecastDialogRenderer(e),this._dialog.visible().subscribe(this._subscribe),this._dialog)))}}},858554:(e,t,s)=>{"use strict";s.d(t,{SeasonalsDialogController:()=>o});var i=s(999138);let n;class o extends i.DialogRenderer{constructor(){super(...arguments),this._dialog=null,this._subscribe=e=>{this._setVisibility(e)}}show(e){this._load(e).then((e=>e.show()))}hide(){this._dialog?.hide()}
static getInstance(){return n||(n=new o),n}async _load(e){const t=await Promise.all([s.e(56316),s.e(25234),s.e(75816),s.e(93703),s.e(44524),s.e(62093),s.e(44178),s.e(21356),s.e(62564),s.e(58985),s.e(59258),s.e(82421),s.e(67158),s.e(16190),s.e(3782),s.e(77280),s.e(49162),s.e(85758),s.e(28101),s.e(81397),s.e(56657),s.e(84984),s.e(63183),s.e(82321),s.e(24377),s.e(31057),s.e(51980),s.e(62526),s.e(52181),s.e(38639)]).then(s.bind(s,227139));return this._dialog?.hide(),this._dialog?.visible().unsubscribe(this._subscribe),this._dialog=new t.SeasonalsDialogRenderer(e),this._dialog.visible().subscribe(this._subscribe),this._dialog}}},999138:(e,t,s)=>{"use strict";s.d(t,{DialogRenderer:()=>n});var i=s(375397);class n{constructor(){this._container=document.createElement("div"),this._visibility=new i.WatchedValue(!1),this._rootInstance=null}visible(){return this._visibility.readonly()}_setVisibility(e){this._visibility.setValue(e)}}},188035:(e,t,s)=>{"use strict";s.d(t,{MouseEventHandler:()=>p,defaultPreventedHandler:()=>d,ignoreClickOrTapOnDblClickOrDblTapHandlers:()=>m,isTouchMouseEvent:()=>u});var i=s(481251),n=s(650151),o=s(638456),r=s(124829),a=s(196726),l=s(937713);let _=2;const h=o.isSafari?"click":"auxclick",c={treatVertTouchDragAsPageScroll:!1,treatHorzTouchDragAsPageScroll:!1,ignoreClickAndTapOnDblClickOrDblTap:!1};function u(e){return"isTouch"in e&&"stylus"in e}function d(e){return t=>{t.preventDefault(),e(t)}}function m(e){let t=!1;return{clickOrTap:(...s)=>{t=!1,setTimeout((()=>!t&&e.clickOrTap(...s)),501)},doubleClickOrDoubleTap:(...s)=>{t=!0,e.doubleClickOrDoubleTap?.(...s)}}}class p{constructor(e,t,s){if(this._clickCount=0,this._clickTimeoutId=null,this._clickPosition={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._tapCount=0,this._tapTimeoutId=null,this._tapPosition={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._longTapTimeoutId=null,this._longTapActive=!1,this._mouseMoveStartPosition=null,this._touchMoveStartPosition=null,this._touchMoveExceededManhattanDistance=!1,this._cancelClick=!1,this._cancelTap=!1,this._unsubscribeOutsideMouseEvents=null,this._unsubscribeOutsideTouchEvents=null,this._unsubscribeMobileSafariEvents=null,this._unsubscribeMousemove=null,this._unsubscribeRootMouseEvents=null,this._unsubscribeRootTouchEvents=null,this._pinchInfo=null,this._pinchPrevented=!1,this._preventTouchDragProcess=!1,this._mousePressed=!1,this._lastTouchEventTimeStamp=0,this._activeTouchId=null,this._acceptMouseLeave=!o.CheckMobile.iOS(),this._onFirefoxOutsideMouseUp=e=>{this._mouseUpHandler(e)},this._onMobileSafariDoubleClick=e=>{if(this._firesTouchEvents(e)){const t=this._makeCompatEvent(e);if(++this._tapCount,this._tapTimeoutId&&this._tapCount>1){const{manhattanDistance:s}=this._touchMouseMoveWithDownInfo(b(e),this._tapPosition);s<30&&!this._cancelTap&&this._processTouchEvent(t,this._handlers.doubleTapEvent),this._resetTapTimeout()}}else{const t=this._makeCompatEvent(e);if(++this._clickCount,this._clickTimeoutId&&this._clickCount>1){
const{manhattanDistance:s}=this._touchMouseMoveWithDownInfo(b(e),this._clickPosition);s<5&&!this._cancelClick&&this._processMouseEvent(t,this._handlers.mouseDoubleClickEvent),this._resetClickTimeout()}}},this._target=e,this._options=(0,r.merge)((0,r.clone)(c),s||{}),this._options.ignoreClickAndTapOnDblClickOrDblTap){if(t.mouseClickEvent&&t.mouseDoubleClickEvent){const e=m({clickOrTap:t.mouseClickEvent.bind(t),doubleClickOrDoubleTap:t.mouseDoubleClickEvent.bind(t)});t.mouseClickEvent=e.clickOrTap,t.mouseDoubleClickEvent=e.doubleClickOrDoubleTap}if(t.tapEvent&&t.doubleTapEvent){const e=m({clickOrTap:t.tapEvent.bind(t),doubleClickOrDoubleTap:t.doubleTapEvent.bind(t)});t.tapEvent=e.clickOrTap,t.doubleTapEvent=e.doubleClickOrDoubleTap}}this._handlers=t,this._init()}destroy(){null!==this._unsubscribeOutsideMouseEvents&&(this._unsubscribeOutsideMouseEvents(),this._unsubscribeOutsideMouseEvents=null),null!==this._unsubscribeOutsideTouchEvents&&(this._unsubscribeOutsideTouchEvents(),this._unsubscribeOutsideTouchEvents=null),null!==this._unsubscribeMousemove&&(this._unsubscribeMousemove(),this._unsubscribeMousemove=null),null!==this._unsubscribeRootMouseEvents&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),null!==this._unsubscribeRootTouchEvents&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null),null!==this._unsubscribeMobileSafariEvents&&(this._unsubscribeMobileSafariEvents(),this._unsubscribeMobileSafariEvents=null),this._clearLongTapTimeout(),this._resetClickTimeout()}_mouseEnterHandler(e){this._unsubscribeMousemove&&this._unsubscribeMousemove();const t=this._mouseMoveHandler.bind(this);if(this._unsubscribeMousemove=()=>{this._target.removeEventListener("mousemove",t)},this._target.addEventListener("mousemove",t),this._firesTouchEvents(e))return;const s=this._makeCompatEvent(e);this._processMouseEvent(s,this._handlers.mouseEnterEvent),this._acceptMouseLeave=!0}_resetClickTimeout(){null!==this._clickTimeoutId&&clearTimeout(this._clickTimeoutId),this._clickCount=0,this._clickTimeoutId=null,this._clickPosition={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}}_resetTapTimeout(){null!==this._tapTimeoutId&&clearTimeout(this._tapTimeoutId),this._tapCount=0,this._tapTimeoutId=null,this._tapPosition={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}}_mouseMoveHandler(e){if(this._mousePressed||null!==this._touchMoveStartPosition)return;if(this._firesTouchEvents(e))return;const t=this._makeCompatEvent(e);this._processMouseEvent(t,this._handlers.mouseMoveEvent),this._acceptMouseLeave=!0}_touchMoveHandler(e){const t=y(e.changedTouches,(0,n.ensureNotNull)(this._activeTouchId));if(null===t)return;if(this._lastTouchEventTimeStamp=g(e),null!==this._pinchInfo)return;if(this._preventTouchDragProcess)return;this._pinchPrevented=!0;const s=this._touchMouseMoveWithDownInfo(b(t),(0,n.ensureNotNull)(this._touchMoveStartPosition)),{xOffset:i,yOffset:o,manhattanDistance:r}=s;if(this._touchMoveExceededManhattanDistance||!(r<5)){if(!this._touchMoveExceededManhattanDistance){
const e=.5*i,t=o>=e&&!this._options.treatVertTouchDragAsPageScroll,s=e>o&&!this._options.treatHorzTouchDragAsPageScroll;t||s||(this._preventTouchDragProcess=!0),this._touchMoveExceededManhattanDistance=!0,this._cancelTap=!0,this._clearLongTapTimeout(),this._resetTapTimeout()}if(!this._preventTouchDragProcess){const s=this._makeCompatEvent(e,t);this._processTouchEvent(s,this._handlers.touchMoveEvent),(0,a.preventDefault)(e)}}}_mouseMoveWithDownHandler(e){if(0!==e.button)return;const t=this._touchMouseMoveWithDownInfo(b(e),(0,n.ensureNotNull)(this._mouseMoveStartPosition)),{manhattanDistance:s}=t;if(s>=5&&(this._cancelClick=!0,this._resetClickTimeout()),this._cancelClick){const t=this._makeCompatEvent(e);this._processMouseEvent(t,this._handlers.pressedMouseMoveEvent)}}_touchMouseMoveWithDownInfo(e,t){const s=Math.abs(t.x-e.x),i=Math.abs(t.y-e.y);return{xOffset:s,yOffset:i,manhattanDistance:s+i}}_touchEndHandler(e){let t=y(e.changedTouches,(0,n.ensureNotNull)(this._activeTouchId));if(null===t&&0===e.touches.length&&(t=e.changedTouches[0]),null===t)return;this._activeTouchId=null,this._lastTouchEventTimeStamp=g(e),this._clearLongTapTimeout(),this._touchMoveStartPosition=null,this._unsubscribeRootTouchEvents&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);const s=this._makeCompatEvent(e,t);if(this._processTouchEvent(s,this._handlers.touchEndEvent),++this._tapCount,this._tapTimeoutId&&this._tapCount>1){const{manhattanDistance:e}=this._touchMouseMoveWithDownInfo(b(t),this._tapPosition);e<30&&!this._cancelTap&&this._processTouchEvent(s,this._handlers.doubleTapEvent),this._resetTapTimeout()}else this._cancelTap||(this._processTouchEvent(s,this._handlers.tapEvent),this._handlers.tapEvent&&(0,a.preventDefault)(e));0===this._tapCount&&(0,a.preventDefault)(e),0===e.touches.length&&this._longTapActive&&(this._longTapActive=!1,(0,a.preventDefault)(e))}_touchCancelHandler(e){this._touchEndHandler(e)}_mouseUpHandler(e){if(0!==e.button)return;const t=this._makeCompatEvent(e);if(this._mouseMoveStartPosition=null,this._mousePressed=!1,this._unsubscribeRootMouseEvents&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),o.isFF){this._target.ownerDocument.documentElement.removeEventListener("mouseleave",this._onFirefoxOutsideMouseUp)}if(!this._firesTouchEvents(e))if(this._processMouseEvent(t,this._handlers.mouseUpEvent),++this._clickCount,this._clickTimeoutId&&this._clickCount>1){const{manhattanDistance:s}=this._touchMouseMoveWithDownInfo(b(e),this._clickPosition);s<5&&!this._cancelClick&&this._processMouseEvent(t,this._handlers.mouseDoubleClickEvent),this._resetClickTimeout()}else this._cancelClick||this._processMouseEvent(t,this._handlers.mouseClickEvent)}_clearLongTapTimeout(){null!==this._longTapTimeoutId&&(clearTimeout(this._longTapTimeoutId),this._longTapTimeoutId=null)}_touchStartHandler(e){if(null!==this._activeTouchId)return this._clearLongTapTimeout(),void this._resetTapTimeout();const t=e.changedTouches[0];this._activeTouchId=t.identifier,this._lastTouchEventTimeStamp=g(e)
;const s=this._target.ownerDocument.documentElement;this._cancelTap=!1,this._touchMoveExceededManhattanDistance=!1,this._preventTouchDragProcess=!1,this._touchMoveStartPosition=b(t),this._unsubscribeRootTouchEvents&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);{const t=this._touchMoveHandler.bind(this),i=this._touchEndHandler.bind(this);this._unsubscribeRootTouchEvents=()=>{s.removeEventListener("touchmove",t),s.removeEventListener("touchend",i)},s.addEventListener("touchmove",t,{passive:!1}),s.addEventListener("touchend",i,{passive:!1}),this._clearLongTapTimeout(),this._longTapTimeoutId=setTimeout(this._longTapHandler.bind(this,e),240)}const i=this._makeCompatEvent(e,t);this._processTouchEvent(i,this._handlers.touchStartEvent),this._tapTimeoutId||(this._tapCount=0,this._tapTimeoutId=setTimeout(this._resetTapTimeout.bind(this),500),this._tapPosition=b(t))}_wheelClickHandler(e){if(1!==e.button)return;if(this._firesTouchEvents(e))return;const t=this._makeCompatEvent(e);this._processMouseEvent(t,this._handlers.wheelClickEvent)}_mouseDownHandler(e){if(0!==e.button)return;const t=this._target.ownerDocument.documentElement;o.isFF&&t.addEventListener("mouseleave",this._onFirefoxOutsideMouseUp),this._cancelClick=!1,this._mouseMoveStartPosition=b(e),this._unsubscribeRootMouseEvents&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null);{const e=this._mouseMoveWithDownHandler.bind(this),s=this._mouseUpHandler.bind(this);this._unsubscribeRootMouseEvents=()=>{t.removeEventListener("mousemove",e),t.removeEventListener("mouseup",s)},t.addEventListener("mousemove",e),t.addEventListener("mouseup",s)}if(this._mousePressed=!0,this._firesTouchEvents(e))return;const s=this._makeCompatEvent(e);this._processMouseEvent(s,this._handlers.mouseDownEvent),this._clickTimeoutId||(this._clickCount=0,this._clickTimeoutId=setTimeout(this._resetClickTimeout.bind(this),500),this._clickPosition=b(e))}_init(){this._target.addEventListener("mouseenter",this._mouseEnterHandler.bind(this)),this._target.addEventListener("touchcancel",this._touchCancelHandler.bind(this));{const e=this._target.ownerDocument,t=e=>!e.target||!this._target.contains(e.target),s=e=>{if(!t(e))return;const s=e.changedTouches[0];this._lastTouchEventTimeStamp=g(e),this._processTouchEvent(this._makeCompatEvent(e,s),this._handlers.touchStartOutsideEvent)},i=e=>{t(e)&&!this._firesTouchEvents(e)&&this._processMouseEvent(this._makeCompatEvent(e),this._handlers.mouseDownOutsideEvent)};this._unsubscribeOutsideTouchEvents=()=>{e.removeEventListener("touchstart",s)},this._unsubscribeOutsideMouseEvents=()=>{e.removeEventListener("mousedown",i)},e.addEventListener("mousedown",i),e.addEventListener("touchstart",s,{passive:!0})}o.CheckMobile.iOS()&&(this._unsubscribeMobileSafariEvents=()=>{this._target.removeEventListener("dblclick",this._onMobileSafariDoubleClick)},this._target.addEventListener("dblclick",this._onMobileSafariDoubleClick)),this._target.addEventListener("mouseleave",this._mouseLeaveHandler.bind(this)),
this._target.addEventListener("contextmenu",this._contextMenuHandler.bind(this)),this._target.addEventListener("touchstart",this._touchStartHandler.bind(this),{passive:!0}),(0,a.preventScrollByWheelClick)(this._target),this._target.addEventListener("mousedown",this._mouseDownHandler.bind(this)),this._target.addEventListener(h,this._wheelClickHandler.bind(this)),this._initPinch(),this._target.addEventListener("touchmove",(()=>{}),{passive:!1})}_initPinch(){void 0===this._handlers.pinchStartEvent&&void 0===this._handlers.pinchEvent&&void 0===this._handlers.pinchEndEvent||(this._target.addEventListener("touchstart",(e=>this._checkPinchState(e.touches)),{passive:!0}),this._target.addEventListener("touchmove",(e=>{if(null===this._pinchInfo)return;const t=y(e.touches,(0,n.ensureNotNull)(this._activeTouchId)),s=y(e.touches,this._pinchInfo.secondTouchId);if(t&&s&&void 0!==this._handlers.pinchEvent){const{startPinchDistance:i,startPinchMiddlePoint:n}=this._pinchInfo,o=f(t,s)/i,r=v(this._target);this._handlers.pinchEvent(n,{x:t.clientX-r.left,y:t.clientY-r.top},{x:s.clientX-r.left,y:s.clientY-r.top},o),(0,a.preventDefault)(e)}}),{passive:!1}),this._target.addEventListener("touchend",(e=>{this._checkPinchState(e.touches)})))}_checkPinchState(e){1===e.length&&(this._pinchPrevented=!1),2!==e.length||this._pinchPrevented||this._longTapActive?this._stopPinch():this._startPinch(e)}_startPinch(e){if(void 0!==this._handlers.pinchStartEvent&&null===this._pinchInfo){const t=v(this._target);let s,i;e[0].identifier===this._activeTouchId?(s=e[0],i=e[1]):(s=e[1],i=e[0]);const n={x:s.clientX-t.left,y:s.clientY-t.top},o={x:i.clientX-t.left,y:i.clientY-t.top},r={x:(n.x+o.x)/2,y:(n.y+o.y)/2};this._handlers.pinchStartEvent(r,n,o,{bothPointsOnTargetElement:this._target.contains(i.target)})&&(this._pinchInfo={startPinchDistance:f(s,i),startPinchMiddlePoint:r,secondTouchId:i.identifier})}this._clearLongTapTimeout()}_stopPinch(){null!==this._pinchInfo&&(this._pinchInfo=null,this._handlers.pinchEndEvent?.())}_mouseLeaveHandler(e){if(this._unsubscribeMousemove&&this._unsubscribeMousemove(),this._firesTouchEvents(e))return;if(!this._acceptMouseLeave)return;const t=this._makeCompatEvent(e);this._processMouseEvent(t,this._handlers.mouseLeaveEvent),this._acceptMouseLeave=!o.CheckMobile.iOS()}_longTapHandler(e){const t=y(e.touches,(0,n.ensureNotNull)(this._activeTouchId));if(null===t)return;const s=this._makeCompatEvent(e,t);this._processTouchEvent(s,this._handlers.longTapEvent),this._processTouchEvent(s,this._handlers.touchContextMenuEvent),this._cancelTap=!0,this._longTapActive=!0}_contextMenuHandler(e){if((0,a.preventDefault)(e),null!==this._touchMoveStartPosition)return;if(this._firesTouchEvents(e))return;const t=this._makeCompatEvent(e);this._processMouseEvent(t,this._handlers.contextMenuEvent),this._cancelClick=!0}_firesTouchEvents(e){return e.sourceCapabilities&&void 0!==e.sourceCapabilities.firesTouchEvents?e.sourceCapabilities.firesTouchEvents:g(e)<this._lastTouchEventTimeStamp+500}_processTouchEvent(e,t){(0,l.setLastMouseOrTouchEventInfo)(e),
t&&t.call(this._handlers,e)}_processMouseEvent(e,t){window.TVD&&("mouseenter"===e.srcType||"mousemove"===e.srcType)&&_>0?_--:("mouseleave"!==e.srcType&&(0,l.setLastMouseOrTouchEventInfo)(e),t&&t.call(this._handlers,e))}_makeCompatEvent(e,t){const s=t||e,n=(0,i.default)((()=>this._target.getBoundingClientRect()||{left:0,top:0}));return{clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,screenX:s.screenX,screenY:s.screenY,get localX(){return s.clientX-n().left},get localY(){return s.clientY-n().top},ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,isTouch:!e.type.startsWith("mouse")&&"contextmenu"!==e.type&&"click"!==e.type,stylus:"stylus"===t?.touchType,srcType:e.type,target:s.target,view:e.view,preventDefault:()=>{"touchstart"!==e.type&&(0,a.preventDefault)(e)}}}}function v(e){return e.getBoundingClientRect()||{left:0,top:0}}function b(e){return{x:e.pageX,y:e.pageY}}function f(e,t){const s=e.clientX-t.clientX,i=e.clientY-t.clientY;return Math.sqrt(s*s+i*i)}function g(e){return e.timeStamp||performance.now()}function y(e,t){for(let s=0;s<e.length;++s)if(e[s].identifier===t)return e[s];return null}},92651:(e,t,s)=>{"use strict";s.d(t,{WebviewControllerBase:()=>o,WebviewPageName:()=>i});var i,n=s(583912);!function(e){e.Financials="financials",e.Forecast="forecast",e.Details="details",e.Technicals="technicals",e.EtfAnalysis="etf-analysis",e.CorporateBonds="corporate-bonds",e.Seasonals="seasonals"}(i||(i={}));class o{_createOpenRequest(e,t=new URLSearchParams){const s=t.get("symbol")??n.linking.symbol.value();return t.set("symbol",s),{execute(){const s=new URL(`webview/${e}/`,location.origin);return s.search=t.toString(),window.open(s,"_blank")},symbol:()=>s}}}},129968:(e,t,s)=>{"use strict";s.d(t,{CustomSourceBase:()=>i});class i{constructor(e,t){this._id=e,this._model=t}id(){return this._id}isHoveredEnabled(){return!0}isSelectionEnabled(){return!1}priceScale(){return null}paneViews(e){return[]}labelPaneViews(e){return[]}priceAxisViews(e,t){return[]}updateViewsForPane(e,t){e.containsMainSeries()&&this.updateAllViews(t)}}},970011:(e,t,s)=>{"use strict";s.d(t,{TrendLineRenderer:()=>d,drawArrow:()=>u});var i=s(650151),n=s(204652),o=s(758910),r=s(509078),a=s(665798),l=s(286436),_=s(631088),h=s(666574);function c(e,t,s,i,n){t.save(),t.fillStyle="#000000",t.beginPath(),t.arc(e.x*n,e.y*n,s*n,0,2*Math.PI,!1),t.fill(),i.strokeWidth&&(t.lineWidth=i.strokeWidth,t.stroke()),t.restore()}function u(e,t,s,i,n,o=!1){if(t.subtract(e).length()<1)return;const r=(0,l.getArrowPoints)(e,t,i,o,!0).slice(0,2);let a=null;const{horizontalPixelRatio:_,verticalPixelRatio:h}=n;for(let e=0;e<r.length;++e){const t=r[e][0],i=r[e][1];(null===a||a.subtract(t).length()>1)&&s.moveTo(t.x*_,t.y*h),s.lineTo(i.x*_,i.y*h),a=i}}class d{constructor(){this._data=null,this._hittest=new r.HitTestResult(r.HitTarget.MovePoint)}setData(e){this._data=e}setHitTest(e){this._hittest=e}draw(e,t){const s=this._data;if(null===s)return;if("points"in s&&s.points.length<2)return;const{horizontalPixelRatio:i}=t;if(void 0!==s.excludeBoundaries){
e.save();for(const i of s.excludeBoundaries)(0,_.addExclusionArea)(e,t,i)}const{linestyle:n,lineCap:o=(n===h.LINESTYLE_SOLID?"round":"butt")}=s;e.lineCap=o,e.lineJoin="round",e.strokeStyle=s.color,e.lineWidth=Math.max(1,Math.floor(s.linewidth*i)),(0,a.setLineStyle)(e,n);const r=s.points[0],l=s.points[1];let c=[];e.beginPath(),s.overlayLineEndings?c=[r.clone(),l.clone()]:this._drawEnds(e,[r,l],s.linewidth,t);const u=this._extendAndClipLineSegment(r,l,t);null!==u&&s.linewidth>0&&(0,a.addPixelPerfectLineToPath)(e,u[0].x,u[0].y,u[1].x,u[1].y,t),s.overlayLineEndings&&this._drawEnds(e,c,s.linewidth,t),e.stroke(),void 0!==s.excludeBoundaries&&e.restore()}hitTest(e,t){const s=this._data;if(null===s)return null;if("points"in s&&s.points.length<2)return null;const i=(s.hitTestTolerance??(0,l.interactionTolerance)().line)+s.linewidth/2,o=s.points[0],r=s.points[1],a=this._extendAndClipLineSegment(o,r,t);if(null!==a){if((0,n.distanceToSegment)(a[0],a[1],e).distance<=i)return this._hittest}return null}_extendAndClipLineSegment(e,t,s){const n=(0,i.ensureNotNull)(this._data);return(0,l.extendAndClipLineSegment)(e,t,s.mediaSize.width,s.mediaSize.height,n.extendleft,n.extendright)}_drawEnds(e,t,s,n){const r=t[0],a=t[1],l=(0,i.ensureNotNull)(this._data);switch(l.leftend){case o.LineEnd.Arrow:u(a,r,e,s,n);break;case o.LineEnd.Circle:c(r,e,s,(0,i.ensureDefined)(l.endstyle),n.horizontalPixelRatio)}switch(l.rightend){case o.LineEnd.Arrow:u(r,a,e,s,n);break;case o.LineEnd.Circle:c(a,e,s,(0,i.ensureDefined)(l.endstyle),n.horizontalPixelRatio)}}}},55582:(e,t,s)=>{"use strict";function i(e,t,s){let i=e[`${t}#${s}`]||null;return null===i&&(i=e[t]||null),null===i&&Object.keys(e).forEach((s=>{null===i&&s.startsWith(`${t}#`)&&(i=e[s]||null)})),i}s.d(t,{getObsoleteIdeaSymbolInfo:()=>i})},427047:(e,t,s)=>{"use strict";s.d(t,{NonSeriesStudy:()=>r,isNonSeriesStudy:()=>o});var i=s(650151),n=s(689052);function o(e){return e instanceof r}class r extends n.Study{clearData(){this._customData=null,this._indexes=null}restoreData(e,t,s){super.restoreData(e),this._customData=t,this._indexes=s}state(e){const t=super.state(e);return e&&(t.nonSeriesData=this._customData,t.indexes=this._indexes),t}customData(){return this._customData}_setPaneViews(e){this._paneViews=e,this.model().lightUpdate()}_onDataUpdated(e,t,s){null!==t&&(t.indexes_replace?((0,i.assert)("nochange"!==s),this._indexes=s):(this._customData=t.data,"nochange"!==s&&(this._indexes=s))),super._onDataUpdated(e,t,s)}}},622161:(e,t,s)=>{"use strict";s.r(t),s.d(t,{StudyCompare:()=>W});var i=s(650151),n=s(55582),o=s(546821),r=s(689052),a=s(975179),l=s(658843),_=s(882782),h=s(764829),c=s(675490),u=s(347808),d=s(613438),m=s(432059);const p=h.enabled("force_exchange_as_title");class v extends u.PriceAxisView{constructor(e,t){super(),this._studyCompare=e,this._data=t}_updateRendererData(e,t,s){e.visible=!1,t.visible=!1;const n=this._studyCompare.priceScale(),o=this._studyCompare.lastValueData(this._data.plotIndex,!1);if(o.noData||null===n||n.isEmpty())return
;const r=this._studyCompare.model(),a=r.timeScale().visibleBarsStrictRange(),l=r.mainSeries().bars().lastIndex();if(null===a||null===l)return;if(l<=a.lastBar())s.background=(0,m.resetTransparency)(o.color),s.textColor=this.generateTextColor(s.background),s.borderColor=void 0,e.borderVisible=!1,t.borderVisible=!1;else{const n=r.backgroundColorAtYPercentFromTop(o.coordinate/(0,i.ensureNotNull)(r.paneForSource(this._studyCompare)).height());s.background=n,s.textColor=(0,m.resetTransparency)(o.color),s.borderColor=s.textColor,e.borderVisible=!0,t.borderVisible=!0}s.coordinate=o.coordinate,s.floatCoordinate=o.floatCoordinate;const _=r.properties().childs().scalesProperties.childs();_.showSeriesLastValue.value()&&(e.text=(0,d.getCurrentModePriceText)(n,o),_.seriesLastValueMode.value()!==c.PriceAxisLastValueMode.LastPriceAndPercentageValue?e.secondLine="":e.secondLine=(0,d.getOppositeModePriceText)(n,o),e.visible=!0),t.text="",_.showSymbolLabels.value()&&(t.text=this._paneText(),t.visible=t.text.length>0)}_paneText(){let e="";const t=this._studyCompare.symbolInfo();return p?e=(0,a.displayedSymbolExchange)(t):this._studyCompare.model().properties().childs().scalesProperties.childs().showSymbolLabels.value()&&(e=(0,a.displayedSymbolName)(t)),e}}var b=s(444372),f=s(193938),g=s(911144),y=s(419283),T=s(638456),E=s(627620),S=s(124829),C=s(287741);const I=T.CheckMobile.any();class w extends g.StudyValuesProvider{constructor(e,t){super(e,t),this._emptyValues[0].title=e.guiPlotName(C.TitleDisplayTarget.StatusLine,"")}getValues(e){return(0,S.isNumber)(e)||(this._showLastPriceAndChangeOnly()?e=this._study.data().lastIndex():(e=this._model.crossHairSource().appliedIndex(),(0,S.isNumber)(e)||(e=this._study.data().lastIndex()))),super.getValues(e)}_hideValues(){return!1}_showLastPriceAndChangeOnly(){return I&&(null===this._model.crossHairSource().pane||(0,E.isLineToolName)(y.tool.value())||null!==this._model.lineBeingEdited())}}class M extends f.StudyDataWindowView{constructor(e,t){super(e,t),this._studyCompare=e}_hideValues(){return!1}_createValuesProvider(e,t){return new w(e,t)}}var P=s(35403);class x extends M{constructor(e,t){super(e,t),this._additional=null,this._showSeriesOHLC=t.properties().childs().paneProperties.childs().legendProperties.childs().showSeriesOHLC,this._showSeriesOHLC.subscribe(this,this.update)}areValuesVisible(){return this._showSeriesOHLC.value()}destroy(){this._showSeriesOHLC.unsubscribeAll(this)}additional(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._additional}_updateImpl(){{const e=(0,P.getDataVendorString)(this._studyCompare.symbolInfo());this._additional=e?b.t(null,void 0,s(957131))+" "+e:null}super._updateImpl()}}var D=s(323719),k=s(339709),L=s(181945);class R extends L.StudyStatusProvider{getSplitTitle(){return this._source.titleInParts(C.TitleDisplayTarget.StatusLine,!0,void 0,!1,!1)}text(){
return this._source.isActualInterval()?this._source.isFailed()?`${this._source.title(C.TitleDisplayTarget.StatusLine,!0,void 0,!1,!1)}: ${this.sourceStatusText()}`:`${this._source.title(C.TitleDisplayTarget.StatusLine,!0,void 0,!1,!1)} ${this.sourceStatusText()}`:this._source.title(C.TitleDisplayTarget.StatusLine,!0,void 0,!1,!1)}}var A=s(157504),O=s(61625),q=s(375397);const V=h.enabled("study_overlay_compare_legend_option"),N=h.enabled("force_exchange_as_title"),H=!h.enabled("hide_study_compare_legend_item"),F=h.enabled("hide_unresolved_symbols_in_legend");class W extends r.Study{constructor(e,t,s,i,n){super(e,function(e){return e.hasChild("currencyId")||e.addChild("currencyId",new l.Property(null)),e.hasChild("unitId")||e.addChild("unitId",new l.Property(null)),e.addExcludedKey("currencyId",1),e.addExcludedKey("unitId",1),e}(t),s,i,n),this._isActingAsSymbolSource=new q.WatchedValue(!0),this._realignToolsLastParams=null,this._lastResolvedSymbolSource="",this.properties().childs().minTick.subscribe(null,(()=>this._recreatePriceFormattingDependencies())),this.properties().childs().minTick.subscribe(null,(()=>this._model.fullUpdate())),this.properties().childs().currencyId.subscribe(this,this._onCurrencyChanged),this.properties().childs().unitId.subscribe(this,this._onUnitChanged),this._symbolResolvingActive=new q.WatchedValue(!1),this._symbolHibernated=new q.WatchedValue(!1),e.mainSeries().onIntervalChanged().subscribe(this,(()=>e.realignLineTools(this)))}destroy(){this._model.mainSeries().onIntervalChanged().unsubscribeAll(this),super.destroy()}properties(){return this._properties}isActingAsSymbolSource(){return this._isActingAsSymbolSource.readonly()}symbolParams(){return(0,A.symbolParams)(this)}compareSymbolParams(e){return(0,A.compareSymbolParams)(this,e,this._model.unitConversionEnabled())}setSymbolParams(e){this._setSymbolCurrencyUnitInternal(e)}symbol(){return this.properties().childs().inputs.childs().symbol.value()}symbolChanged(){return this.properties().childs().inputs.childs().symbol.listeners()}setSymbol(e){this.setSymbolParams({symbol:e})}symbolInfo(){if(!this._resolvedSymbols)return null;const e=this.symbol();if(!e)return null;let t;return t=this._model.isSnapshot()?this._resolvedSymbols.___snapshot||null:this._resolvedSymbols[this._getSymbolForResolve(e)]||null,this._model.isSnapshot()&&null===t&&(t=(0,n.getObsoleteIdeaSymbolInfo)(this._resolvedSymbols,e,this.currency()),null!==t&&(this._resolvedSymbols.___snapshot=t)),t}symbolResolved(){return this.symbolsResolved()}symbolResolvingActive(){return this._symbolResolvingActive}symbolHibernated(){return this._symbolHibernated}isVisible(){const e=super.isVisible();return this._symbolHibernated.setValue(!e),e}symbolSameAsCurrent(e){return(0,A.symbolSameAsCurrent)(e,this.symbolInfo())}symbolSameAsResolved(e){return(0,O.symbolSameAsResolved)(e,this._lastResolvedSymbolSource,this.symbol())}currency(){return this.properties().childs().currencyId.value()||null}setCurrency(e){this.setSymbolParams({currency:e})}isConvertedToOtherCurrency(){return(0,
a.isConvertedToOtherCurrency)(this.symbolInfo())}unit(){return this.properties().childs().unitId.value()||null}setUnit(e){this.setSymbolParams({unit:e})}isConvertedToOtherUnit(){return(0,a.isConvertedToOtherUnit)(this.symbolInfo(),this._model.unitConversionEnabled())}style(){return 2}setStyle(e){}interval(){return this._model.mainSeries().interval()}setInterval(e){}symbolSource(){return this}valueAt(e,t){return this.data().search(e)?.value[1]??null}state(e,t){const s=super.state(e,t);this._model.unitConversionEnabled()||delete s.state.unitId;const n=this.symbol();return s.state.inputs.symbol=(0,a.symbolToSaveInState)(this.symbolInfo()??this._model.chartApi().lastSymbolResolveInfo(n),n),e&&((0,i.ensureDefined)(s.data).symbols={___snapshot:this.symbolInfo()||void 0}),s}symbolTitle(e,t,s){return this.title(e,!0,{},!1,t)}titleInParts(e,t,s,i,n){const o=this._titleInParts(e,t,s,i,n);return[[o[0],...o[1]??[]].join(", ")]}tags(){const e=this.symbol();return e?[e]:[]}statusView(){return H?super.statusView():null}guiPlotName(e,t){return this.properties().childs().inputs.childs().symbol.value()}canOverrideMinTick(){return!0}canBeHiddenByGlobalFlag(){return!1}legendValuesProvider(){return new w(this,this.model())}statusProvider(e){return new R(this)}measureUnitId(){return(0,a.measureUnitId)(this.symbolInfo())}getSymbolString(e){return void 0===e&&(e=this._getSymbolForApi(this.symbol())),(0,_.encodeExtendedSymbolOrGetSimpleSymbolString)(this._getSymbolObject(e))}_createPriceAxisView(e){return new v(this,{plotIndex:"compare"})}_createViews(){this._legendView||(this._legendView=new x(this,this._model)),this._dataWindowView||(this._dataWindowView=new M(this,this._model)),this._statusView||(this._statusView=new D.StudyStatusView(this)),super._createViews()}_onUnitChanged(){"alwaysOff"!==(0,o.currencyUnitVisibilityProperty)().value()&&this._model.fullUpdate(),this._model.unitConversionEnabled()&&this.isStarted()&&this._tryChangeInputs(),this._unitChanged.fire()}_getSymbolObject(e){const t=super._getSymbolObject(e),s=this.currency();null!==s&&(t["currency-id"]=s);const i=this.unit();return this._model.unitConversionEnabled()&&null!==i&&(t["unit-id"]=i),t}_onSymbolResolvingStart(e,t){this._lastResolvedSymbolSource=t,super._onSymbolResolvingStart(e,t),this._symbolResolvingActive.setValue(!0)}_onSymbolError(){super._onSymbolError(),this._symbolResolvingActive.setValue(!1)}_onSymbolResolved(e,t,s){super._onSymbolResolved(e,t,s),this._recreatePriceFormattingDependencies();const i=t===this.symbol()?(0,a.extractSymbolNameFromSymbolInfo)(s,this.symbol()):null,n=(0,a.symbolCurrency)(s),o=(0,a.symbolUnit)(s,this._model.unitConversionEnabled());this._setSymbolCurrencyUnitInternal({symbol:i??void 0,currency:n,unit:o},s),this._symbolResolvingActive.setValue(!1)}async _changeInputsImpl(e,t){await super._changeInputsImpl(e,t),this._realignLineToolsIfParamsChanged()}_createStudyOnServer(){const e=super._createStudyOnServer();return this._realignLineToolsIfParamsChanged(),e}_tryCreateFormatter(){
k.customFormatters?.priceFormatterFactory?.(this.symbolInfo(),this.properties().childs().minTick.value());return(0,a.createSeriesFormatter)(this.symbolInfo(),this.properties().childs().minTick.value())}_tryCreateDefaultFormatter(){return(0,a.createSeriesFormatter)(this.symbolInfo(),"default")}_titleInParts(e,t,s,i,n){const o=this.symbolInfo();return[this._getSymbolTitlePart(o),[this._getExchangeTitlePart(o,n),this._getPriceSourceTitlePart(o)].filter((e=>null!==e))]}_skipHistogramBaseOnAutoScale(){return!0}_getSymbolTitlePart(e){if(null===e)return F?"":this.properties().childs().inputs.childs().symbol.value();const t=(0,a.getSymbolExchange)(e);if(N&&void 0!==t)return t;if(V)switch(this._model.mainSeries().symbolTextSourceProxyProperty().value()){case"description":return e.description;case"ticker-and-description":return`${e.name}, ${e.description}`;case"long-description":return e.long_description??e.description}return e.name}_getExchangeTitlePart(e,t){return null===e||t?null:(0,a.getSymbolExchange)(e)}_getPriceSourceTitlePart(e){return null}_setSymbolCurrencyUnitInternal(e,t){const{symbol:s,currency:i,unit:n}=e,o=this.properties().childs(),r=o.inputs.childs().symbol.value(),l=o.currencyId.value(),_=o.unitId.value();if(void 0!==s&&o.inputs.childs().symbol.setValueSilently(s),void 0!==i&&o.currencyId.setValueSilently(i),void 0!==n&&o.unitId.setValueSilently(n),t)this._resolvedSymbolsByInput[this.symbol()]=t,this._resolvedSymbols[this._getSymbolForResolve(this.symbol())]=t,this._realignToolsLastParams=null;else{const e=this.symbolInfo();null!==e&&(o.currencyId.setValueSilently((0,a.symbolCurrency)(e)),o.unitId.setValueSilently((0,a.symbolUnit)(e,this._model.unitConversionEnabled())))}o.inputs.childs().symbol.value()!==r&&o.inputs.childs().symbol.listeners().fire(o.inputs.childs().symbol,""),o.currencyId.value()!==l&&o.currencyId.listeners().fire(o.currencyId,""),o.unitId.value()!==_&&o.unitId.listeners().fire(o.unitId,""),this._realignLineToolsIfParamsChanged()}_realignLineToolsIfParamsChanged(){let e=null===this._realignToolsLastParams;if(null!==this._realignToolsLastParams){const t=this.compareSymbolParams(this._realignToolsLastParams);e=t.symbolChanged||t.intervalChanged||t.currencyChanged||t.unitChanged}e&&(this._model.realignLineTools(this),this._realignToolsLastParams=this.symbolParams())}}},315507:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M12.57 5.5h-.07a3.5 3.5 0 1 0 .07 7A4.98 4.98 0 0 1 4 9a5 5 0 0 1 8.57-3.5z"/></svg>'},85290:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M12.22 11.78A3.47 3.47 0 0 0 9 6.98a3.48 3.48 0 0 0-3.22 4.8 6.97 6.97 0 0 1 6.44 0zM4.18 9.83L2.1 9.28l.33-1.24 2.07.55-.33 1.24zM6.38 6.36l-.9-1.94 1.16-.54.9 1.94-1.16.54zM10.46 5.82l.9-1.94 1.16.54-.9 1.94-1.16-.54zM13.49 8.6l2.07-.56.33 1.24-2.07.55-.33-1.24z"/></svg>'}}]);